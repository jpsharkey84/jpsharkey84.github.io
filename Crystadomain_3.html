<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Crystal Domain OS</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');

        :root {
            --panel-blue: rgba(74, 103, 153, 0.9);
            --border-light: #9ab4d8;
            --text-white: #e0eaf5;
            --highlight: #cedef0;
            --gold: #ffd700;
        }

        * { box-sizing: border-box; cursor: crosshair; }
        body, html { margin: 0; padding: 0; width: 100vw; height: 100vh; overflow: hidden; font-family: 'VT323', monospace; background: #000; }

        /* THE EXACT BACKGROUND */
        .desktop {
            position: relative; width: 100%; height: 100%;
            background: url('https://i.imgur.com/n6L98jJ.png') no-repeat center center;
            background-size: cover;
            display: flex; justify-content: center; align-items: flex-end;
        }

        /* UI OVERLAY */
        .ui-container {
            position: relative; width: 100%; max-width: 1000px;
            display: grid; grid-template-columns: 1fr 1fr; gap: 50px;
            padding: 0 40px 60px 40px; z-index: 10;
        }

        .window {
            background: var(--panel-blue); border: 4px solid var(--border-light);
            border-radius: 8px; padding: 15px; box-shadow: 0 10px 0 rgba(0,0,0,0.4);
        }

        .window-header {
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 2px solid var(--border-light); padding-bottom: 8px; margin-bottom: 15px;
            font-size: 24px; color: var(--highlight); letter-spacing: 2px;
        }

        /* LEFT PANEL: FUNCTIONAL TABS */
        .content-area { height: 210px; overflow-y: auto; margin-bottom: 12px; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }

        .nav-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 6px; }
        .nav-btn {
            background: rgba(0,0,0,0.3); border: 2px solid var(--border-light);
            color: white; padding: 6px; font-family: 'VT323'; font-size: 20px; text-transform: uppercase;
        }
        .nav-btn.active { background: var(--highlight); color: var(--panel-blue); }

        /* LIST UTILITY */
        .todo-item { display: flex; align-items: center; gap: 10px; padding: 5px 0; border-bottom: 1px solid rgba(255,255,255,0.1); }
        input[type="text"], input[type="number"] {
            width: 100%; background: rgba(0,0,0,0.2); border: 1px solid var(--border-light);
            color: white; font-family: 'VT323'; font-size: 20px; padding: 4px; outline: none;
        }

        /* RIGHT PANEL: STATUS CONTROLS */
        .date-display { font-size: 34px; color: white; margin-bottom: 2px; }
        .mood-display { font-size: 20px; color: var(--gold); margin-bottom: 15px; }

        .control-row { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-bottom: 12px; }
        .toggle {
            background: rgba(0,0,0,0.2); border: 1px solid var(--border-light);
            color: white; padding: 6px; font-size: 18px; text-align: center;
        }
        .toggle.on { background: white; color: var(--panel-blue); border-color: white; }

        .footer { display: flex; justify-content: space-between; align-items: center; margin-top: 15px; }
        .save-btn {
            background: var(--highlight); color: var(--panel-blue); border: none;
            padding: 8px 30px; font-family: 'VT323'; font-size: 22px; border-radius: 4px;
        }
        .sprite { font-size: 38px; animation: bounce 0.8s infinite alternate; }
        @keyframes bounce { from { transform: scale(1); } to { transform: scale(1.1) translateY(-5px); } }
    </style>
</head>
<body>

<div class="desktop">
    <div class="ui-container">
        
        <div class="window">
            <div class="window-header"><span>‚öîÔ∏è BEACONS</span><span>üìë</span></div>
            
            <div class="content-area">
                <div id="backpack" class="tab-content active">
                    <input type="text" id="add-task" placeholder="+ NEW OBJECTIVE">
                    <div id="task-list" style="margin-top:10px;"></div>
                </div>
                <div id="money" class="tab-content">
                    <div style="font-size:30px; color:var(--gold); text-align:center;">CURRENT BALANCE</div>
                    <div id="balance" style="font-size:50px; text-align:center;">0 GP</div>
                    <input type="number" id="add-gold" placeholder="+ ADD AMOUNT">
                </div>
                <div id="logs" class="tab-content">
                    <div id="history-list" style="font-size:18px;"></div>
                </div>
            </div>

            <div class="nav-grid">
                <button class="nav-btn" onclick="openTab('today')">Today</button>
                <button class="nav-btn" onclick="openTab('logs')">Logs</button>
                <button class="nav-btn active" onclick="openTab('backpack')">Backpack</button>
                <button class="nav-btn" onclick="openTab('money')">Money</button>
            </div>
        </div>

        <div class="window">
            <div class="window-header"><span>üõ°Ô∏è STATUS</span><span>üìë</span></div>
            <div class="date-display" id="clock">Sun Jan 14 2026</div>
            <div class="mood-display">Mood: <span id="mood-text">Orange Flow</span></div>
            
            <div class="control-row">
                <div class="toggle on" onclick="t(this)">Active</div>
                <div class="toggle" onclick="t(this)">Idle</div>
                <div class="toggle" onclick="t(this)">Paused</div>
            </div>
            <div class="control-row">
                <div class="toggle" onclick="t(this)">Rain</div>
                <div class="toggle on" onclick="t(this)">Sun</div>
                <div class="toggle" onclick="t(this)">Grey</div>
            </div>
            <div class="control-row">
                <div class="toggle" onclick="t(this)">Steady</div>
                <div class="toggle on" onclick="t(this)">Flowing</div>
                <div class="toggle" onclick="t(this)">Low</div>
            </div>

            <div class="footer">
                <button class="save-btn" onclick="saveSession()">SAVE DAY</button>
                <div class="sprite">üê•</div>
            </div>
        </div>

    </div>
</div>

<script>
    // --- REAL UTILITY LOGIC ---
    let tasks = JSON.parse(localStorage.getItem('tasks')) || [];
    let gold = localStorage.getItem('gold') || 0;

    // 1. Tab Switching
    function openTab(name) {
        document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(name).classList.add('active');
        event.currentTarget.classList.add('active');
    }

    // 2. Task Management
    const taskInput = document.getElementById('add-task');
    taskInput.addEventListener('keypress', e => {
        if(e.key === 'Enter' && taskInput.value) {
            tasks.push(taskInput.value);
            localStorage.setItem('tasks', JSON.stringify(tasks));
            taskInput.value = '';
            renderTasks();
        }
    });

    function renderTasks() {
        const list = document.getElementById('task-list');
        list.innerHTML = tasks.map((t, i) => `
            <div class="todo-item">
                <span onclick="delTask(${i})" style="color:red; cursor:pointer;">[X]</span>
                <span>${t}</span>
            </div>
        `).join('');
    }

    function delTask(i) {
        tasks.splice(i, 1);
        localStorage.setItem('tasks', JSON.stringify(tasks));
        renderTasks();
    }

    // 3. Money Utility
    const goldInput = document.getElementById('add-gold');
    goldInput.addEventListener('keypress', e => {
        if(e.key === 'Enter' && goldInput.value) {
            gold = parseInt(gold) + parseInt(goldInput.value);
            localStorage.setItem('gold', gold);
            goldInput.value = '';
            updateGold();
        }
    });

    function updateGold() { document.getElementById('balance').innerText = gold + " GP"; }

    // 4. Status Toggles
    function t(el) {
        el.parentElement.querySelectorAll('.toggle').forEach(b => b.classList.remove('on'));
        el.classList.add('on');
    }

    // 5. Save & Clock
    function saveSession() {
        alert("SESSION DATA ARCHIVED TO LOCALSTORAGE");
    }

    function updateTime() {
        const now = new Date();
        document.getElementById('clock').innerText = now.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: '2-digit', year: 'numeric' });
    }

    // Initialize
    setInterval(updateTime, 1000);
    updateTime();
    renderTasks();
    updateGold();
</script>

</body>
</html>
